{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\qwerty\\\\PycharmProjects\\\\MERN\\\\restaurant-reviews\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Users\\\\qwerty\\\\PycharmProjects\\\\MERN\\\\restaurant-reviews\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from\"react\";import RestaurantDataService from\"../services/restaurant\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Restaurant=function Restaurant(props){var initialRestaurantState={id:null,name:\"\",address:{},cuisine:\"\",reviews:[]};var _useState=useState(initialRestaurantState),_useState2=_slicedToArray(_useState,2),restaurant=_useState2[0],setRestaurant=_useState2[1];var getRestaurant=function getRestaurant(id){RestaurantDataService.get(id).then(function(response){setRestaurant(response.data);console.log(response.data);}).catch(function(e){console.log(e);});};useEffect(function(){getRestaurant(props.match.params.id);},[props.match.params.id]);var deleteReview=function deleteReview(reviewId,index){RestaurantDataService.deleteReview(reviewId,props.user.id).then(function(response){setRestaurant(function(prevState){prevState.reviews.splice(index,1);return _objectSpread({},prevState);});}).catch(function(e){console.log(e);});};return/*#__PURE__*/_jsx(\"div\",{children:restaurant?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:restaurant.name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Cuisine: \"}),restaurant.cuisine,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),restaurant.address.building,\" \",restaurant.address.street,\",\",\" \",restaurant.address.zipcode]}),/*#__PURE__*/_jsx(Link,{to:\"/restaurants/\"+props.match.params.id+\"/review\",className:\"btn btn-primary\",children:\"Add Review\"}),/*#__PURE__*/_jsx(\"h4\",{children:\" Reviews \"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:restaurant.reviews.length>0?restaurant.reviews.map(function(review,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4 pb-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[review.text,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"User: \"}),review.name,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Date: \"}),review.date]}),props.user&&props.user.id===review.user_id&&/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return deleteReview(review._id,index);},className:\"btn btn-primary col-lg-5 mx-1 mb-1\",children:\"Delete\"}),/*#__PURE__*/_jsx(Link,{to:{pathname:\"/restaurants/\"+props.match.params.id+\"/review\",state:{currentReview:review}},className:\"btn btn-primary col-lg-5 mx-1 mb-1\",children:\"Edit\"})]})]})})},index);}):/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-4\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No reviews yet.\"})})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"No restaurant selected.\"})]})});};export default Restaurant;","map":{"version":3,"sources":["C:/Users/qwerty/PycharmProjects/MERN/restaurant-reviews/frontend/src/components/restaurants.js"],"names":["React","useState","useEffect","RestaurantDataService","Link","Restaurant","props","initialRestaurantState","id","name","address","cuisine","reviews","restaurant","setRestaurant","getRestaurant","get","then","response","data","console","log","catch","e","match","params","deleteReview","reviewId","index","user","prevState","splice","building","street","zipcode","length","map","review","text","date","user_id","_id","pathname","state","currentReview"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport RestaurantDataService from \"../services/restaurant\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Restaurant = (props) => {\r\n  const initialRestaurantState = {\r\n    id: null,\r\n    name: \"\",\r\n    address: {},\r\n    cuisine: \"\",\r\n    reviews: [],\r\n  };\r\n  const [restaurant, setRestaurant] = useState(initialRestaurantState);\r\n\r\n  const getRestaurant = (id) => {\r\n    RestaurantDataService.get(id)\r\n      .then((response) => {\r\n        setRestaurant(response.data);\r\n        console.log(response.data);\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getRestaurant(props.match.params.id);\r\n  }, [props.match.params.id]);\r\n\r\n  const deleteReview = (reviewId, index) => {\r\n    RestaurantDataService.deleteReview(reviewId, props.user.id)\r\n      .then((response) => {\r\n        setRestaurant((prevState) => {\r\n          prevState.reviews.splice(index, 1);\r\n          return {\r\n            ...prevState,\r\n          };\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {restaurant ? (\r\n        <div>\r\n          <h5>{restaurant.name}</h5>\r\n          <p>\r\n            <strong>Cuisine: </strong>\r\n            {restaurant.cuisine}\r\n            <br />\r\n            <strong>Address: </strong>\r\n            {restaurant.address.building} {restaurant.address.street},{\" \"}\r\n            {restaurant.address.zipcode}\r\n          </p>\r\n          <Link\r\n            to={\"/restaurants/\" + props.match.params.id + \"/review\"}\r\n            className=\"btn btn-primary\"\r\n          >\r\n            Add Review\r\n          </Link>\r\n          <h4> Reviews </h4>\r\n          <div className=\"row\">\r\n            {restaurant.reviews.length > 0 ? (\r\n              restaurant.reviews.map((review, index) => {\r\n                return (\r\n                  <div className=\"col-lg-4 pb-1\" key={index}>\r\n                    <div className=\"card\">\r\n                      <div className=\"card-body\">\r\n                        <p className=\"card-text\">\r\n                          {review.text}\r\n                          <br />\r\n                          <strong>User: </strong>\r\n                          {review.name}\r\n                          <br />\r\n                          <strong>Date: </strong>\r\n                          {review.date}\r\n                        </p>\r\n                        {props.user && props.user.id === review.user_id && (\r\n                          <div className=\"row\">\r\n                            <a\r\n                              onClick={() => deleteReview(review._id, index)}\r\n                              className=\"btn btn-primary col-lg-5 mx-1 mb-1\"\r\n                            >\r\n                              Delete\r\n                            </a>\r\n                            <Link\r\n                              to={{\r\n                                pathname:\r\n                                  \"/restaurants/\" +\r\n                                  props.match.params.id +\r\n                                  \"/review\",\r\n                                state: {\r\n                                  currentReview: review,\r\n                                },\r\n                              }}\r\n                              className=\"btn btn-primary col-lg-5 mx-1 mb-1\"\r\n                            >\r\n                              Edit\r\n                            </Link>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })\r\n            ) : (\r\n              <div className=\"col-sm-4\">\r\n                <p>No reviews yet.</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <br />\r\n          <p>No restaurant selected.</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Restaurant;\r\n"]},"metadata":{},"sourceType":"module"}